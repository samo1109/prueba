<html>
<head>
  <title>Calculadora</title>
</head>
<body>
  <div class="calculator">
    <div class="calculator__display">0</div>
    <div class="calculator__keys">
      <button class="key--operator" data-action="add">+</button>
      <button class="key--operator" data-action="subtract">-</button>
      <button class="key--operator" data-action="multiply">ร</button>
      <button class="key--operator" data-action="divide">รท</button>
      <button>7</button>
      <button>8</button>
      <button>9</button>
      <button>4</button>
      <button>5</button>
      <button>6</button>
      <button>1</button>	
      <button>2</button>
      <button>3</button>
      <button>0</button>
      <button data-action="decimal">.</button>
      <button data-action="clear">AC</button>
      <button class="key--equal" data-action="calculate">=</button>
    </div>
  </div>
  const calculator = document.querySelector('.calculator')
  const keys = calculator.querySelector('.calculator__keys')
  const display = calculator.querySelector('.calculator__display')
  keys.addEventListener('click', e => {
    if (e.target.matches('button')) {
      const key = e.target
      const action = key.dataset.action
      const keyContent = key.textContent
      const displayedNum = display.textContent
      if (!action) {
        if (displayedNum === '0') {
          display.textContent = keyContent
        } else {
          display.textContent = displayedNum + keyContent
        }
      }
      if (
        action === 'add' ||
        action === 'subtract' ||
        action === 'multiply' ||
        action === 'divide'
      ) {
        calculator.dataset.firstNumber = displayedNum
        calculator.dataset.operator = action
        display.textContent = '0'
      }
      if (action === 'decimal') {
        if (!displayedNum.includes('.')) {
          display.textContent = displayedNum + '.'
        }
      }
      if (action === 'clear') {
        display.textContent = '0'
        calculator.dataset.firstNumber = ''
        calculator.dataset.operator = ''
      }
      if (action === 'calculate') {
        const firstNumber = calculator.dataset.firstNumber
        const operator = calculator.dataset.operator
        const secondNumber = displayedNum
        const calculate = (n1, op, n2) => {
          let result = ''
          if (op === 'add') {
            result = parseFloat(n1) + parseFloat(n2)
          } else if (op === 'subtract') {
            result = parseFloat(n1) - parseFloat(n2)
          } else if (op === 'multiply') {
            result = parseFloat(n1) * parseFloat(n2)
          } else if (op === 'divide') {
            result = parseFloat(n1) / parseFloat(n2)
          }
          return result
        }
        display.textContent = calculate(firstNumber, operator, secondNumber)
      }
    }
  })
</script>
</body>
</html>
